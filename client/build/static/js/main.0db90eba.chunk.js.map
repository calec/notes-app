{"version":3,"sources":["constants/routes.js","components/AuthUserContext.js","firebase/firebase.js","firebase/auth.js","firebase/db.js","components/PasswordChange.js","components/Account.js","components/withAuthorization.js","components/AccountMenu/AccountMenu.js","components/TopNav/TopNav.js","utils/API.js","components/SharedNotes/SharedNotes.js","components/NoteList/NoteList.js","components/LeftDrawer/LeftDrawer.js","components/SignUp.js","components/NoteArea.js","components/Content/Content.js","components/DeleteAlert/DeleteAlert.js","components/Page/MainPage.js","components/SignIn.js","components/PasswordForget.js","App.js","components/withAuthentication.js","reducers/session.js","reducers/user.js","reducers/index.js","stores/index.js","index.js"],"names":["module","exports","SIGN_UP","SIGN_IN","LANDING","HOME","ACCOUNT","PASSWORD_FORGET","NOTES","AuthUserContext","React","createContext","config","firebase","apps","length","initializeApp","db","database","auth","doCreateUserWithEmailAndPassword","email","password","createUserWithEmailAndPassword","doSignInWithEmailAndPassword","signInWithEmailAndPassword","doSignOut","signOut","doPasswordReset","sendPasswordResetEmail","doPasswordUpdate","currentUser","updatePassword","doCreateUser","id","username","ref","concat","set","onceGetUsers","once","byPropKey","propertyName","value","Object","defineProperty","INITIAL_STATE","passwordOne","passwordTwo","error","PasswordChangeForm","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onSubmit","event","state","then","setState","objectSpread","catch","preventDefault","_this2","classes","_this$state","isInvalid","react_default","a","createElement","Fragment","CssBaseline_default","className","layout","form","FormControl_default","margin","required","InputLabel_default","htmlFor","Input_default","onChange","target","type","textField","Button_default","disabled","fullWidth","variant","color","submit","Component","withStyles","theme","width","display","marginLeft","spacing","unit","marginRight","breakpoints","up","paper","marginTop","flexDirection","alignItems","padding","withAuthorization","authCondition","WithAuthorization","_React$Component","apply","arguments","inherits","createClass","key","onAuthStateChanged","authUser","history","push","routes","components_AuthUserContext","Consumer","withRouter","Typography_default","console","log","PasswordChange","AccountMenuList","open","accountModalOpen","handleAccountToggle","handleAccountClose","anchorEl","contains","handleAccountModalOpen","e","handleAccountModalClose","root","IconButton_default","aria-label","buttonRef","node","aria-owns","aria-haspopup","onClick","classNames","menuButton","AccountCircle_default","Popper_default","transition","disablePortal","menu","_ref","TransitionProps","placement","Grow_default","assign","style","transformOrigin","account","Paper_default","ClickAwayListener_default","onClickAway","MenuList_default","MenuItem_default","Link","to","textDecoration","Modal_default","aria-labelledby","aria-describedby","onClose","top","left","transform","modalPaper","Account","borderRadius","zIndex","position","backgroundColor","palette","background","boxShadow","shadows","textAlign","Navbar","AppBar_default","appBar","Toolbar_default","toolBar","Tooltip_default","title","handleLeftDrawer","leftOpen","hide","MenuSharp_default","flex","FormControlLabel_default","control","Switch_default","handleThemeToggle","AccountMenu","flexGrow","maxHeight","minHeight","API","getNotes","userId","axios","get","saveNote","NoteData","post","getNote","updateNote","body","put","deleteNote","delete","addSharedUser","noteId","getSharedNotes","SharedNotes","notes","isEditable","val","targetId","contextOpen","positionTop","positionLeft","modalOpen","sharedUser","toggleShared","isLoading","selectedSharedIndex","handleShareChange","handleSharedSubmit","res","data","sharedWith","indexOf","handleContextMenu","clientY","clientX","handleClose","loadNotes","err","handleSharedToggle","handleSelectRefresh","newContent","i","_id","content","handleSelectedNote","handleOpen","handleModalClose","prevProps","index","map","slice","_this3","forceUpdate","keyCode","handleBlur","select","_this4","List_default","ListItem_default","button","ListItemIcon_default","FolderSharedSharp_default","ListItemText_default","itemText","primary","collapser","ExpandLess_default","ExpandMore_default","note","Collapse_default","in","timeout","unmountOnExit","component","disablePadding","nested","noteListItem","selected","TextField_default","noteField","InputProps","readOnly","input","disableUnderline","startAdornment","InsertDriveFileOutlined_default","defaultValue","handleSharedIndex","onContextMenu","justifyContent","menuItem","&:focus","main","& $primary, & $icon","common","white","icon","noteFieldEdit","height","noteFieldEditInput","paddingBottom","&:after","borderBottom","&:before","noteFieldIcon","paddingLeft","cursor","NoteList","isMounted","targetIndex","toggleNotes","selectedIndex","handleCloseContext","refreshNewNote","setTimeout","edit","handleSelectedIndex","bind","assertThisInitialized","handleOpenModal","handleDeleteRefresh","handleNotesToggle","FolderSharp_default","collapsers","autoFocus","onFocus","handleFocus","handleChange","onBlur","onKeyDown","keyPress","onDoubleClick","handleDoubleClick","Popover_default","anchorReference","anchorPosition","anchorOrigin","vertical","horizontal","hideBackdrop","menuitem","FolderShared_default","inset","handleDeleteAlert","Delete_default","label","placeholder","InputLabelProps","shrink","Fade_default","transitionDelay","CircularProgress_default","green","font","LeftDrawer","handleNewNote","child","createRef","JSON","stringify","document","nodes","object","leaves","text","current","drawer","Divider_default","components_NoteList_NoteList","innerRef","components_SharedNotes_SharedNotes","header","drawerHeaderL","AddSharp_default","VerticalAlignBottomSharp_default","Hidden_default","mdUp","Drawer_default","drawerPaper","smDown","implementation","headerPaper","_drawerPaper","_headerPaper","appFrame","overflow","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","easeOut","enteringScreen","appBarShift-left","appBarShift-right","down","minWidth","mixins","toolbar","withTheme","styles","SignUpForm","user","uid","_this$state2","name","autoComplete","SignUp","SignUp_SignUpForm","initialValue","Value","fromJSON","NoteArea","selectedNoteBody","selectedNoteID","contentStr","contentObj","parse","slateContent","slate_react_es","scroll","overflowY","Content","components_NoteArea","DeleteAlert","Snackbar_default","alert","deleteAlertOpen","autoHideDuration","handleAlertClose","ContentProps","message","action","close","Close_default","MainPage","reason","createMuiTheme","core_styles","TopNav","components_DeleteAlert_DeleteAlert","Grid_default","container","item","md","components_LeftDrawer_LeftDrawer","xs","components_Content_Content","SignInForm","Checkbox_default","PasswordForgetForm","withAuthentication","WithAuthentication","handleRightDrawer","rightOpen","Provider","BrowserRouter","Switch","Route","exact","path","SignUpPage","SignInPage","AccountPage","applySetAuthUser","sessionReducer","undefined","users","applySetUsers","userReducer","rootReducer","combineReducers","sessionState","userState","store","createStore","ReactDOM","render","index_module","src_App","getElementById"],"mappings":"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","file":"static/js/main.0db90eba.chunk.js","sourcesContent":["\r\n\r\n\r\nconst SIGN_UP = '/signup';\r\nconst SIGN_IN = '/signin';\r\nconst LANDING = '/';\r\nconst HOME = '/home';\r\nconst ACCOUNT = '/account';\r\nconst PASSWORD_FORGET = '/pw-forget';\r\nconst NOTES = '/notes';\r\n\r\n\r\nmodule.exports = {SIGN_UP,SIGN_IN,LANDING,HOME,ACCOUNT,PASSWORD_FORGET,NOTES}","import React from 'react';\r\n\r\nconst AuthUserContext = React.createContext(null);\r\n\r\nexport default AuthUserContext;","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nconst prodConfig = {\r\n//     apiKey: YOUR_API_KEY,\r\n//     authDomain: YOUR_AUTH_DOMAIN,\r\n//     databaseURL: YOUR_DATABASE_URL,\r\n//     projectId: YOUR_PROJECT_ID,\r\n//     storageBucket: '',\r\n//     messagingSenderId: YOUR_MESSAGING_SENDER_ID,\r\n  };\r\n  \r\n  const devConfig = {\r\n    apiKey: \"AIzaSyCBMBQDk44o7BFspQVxjEPfc5uVo2fw4m0\",\r\n    authDomain: \"note-app-ucberk.firebaseapp.com\",\r\n    databaseURL: \"https://note-app-ucberk.firebaseio.com\",\r\n    projectId: \"note-app-ucberk\",\r\n    storageBucket: \"note-app-ucberk.appspot.com\",\r\n    messagingSenderId: \"888209507310\"}\r\n\r\n{  const config = process.env.NODE_ENV === 'production'\r\n      ? prodConfig\r\n      : devConfig;\r\n\r\nif (!firebase.apps.length) {\r\n  firebase.initializeApp(config);\r\n}\r\n\r\n\r\n}\r\n\r\nconst db = firebase.database();\r\nconst auth = firebase.auth();\r\nexport {\r\n  db,\r\n  auth,\r\n  firebase,\r\n};","import { auth } from './firebase';\r\n\r\n// Sign Up\r\nexport const doCreateUserWithEmailAndPassword = (email, password) =>\r\n  auth.createUserWithEmailAndPassword(email, password);\r\n\r\n// Sign In\r\nexport const doSignInWithEmailAndPassword = (email, password) =>\r\n  auth.signInWithEmailAndPassword(email, password);\r\n\r\n// Sign out\r\nexport const doSignOut = () =>\r\n  auth.signOut();\r\n\r\n\r\n\r\n// Password Reset\r\nexport const doPasswordReset = (email) =>\r\n  auth.sendPasswordResetEmail(email);\r\n\r\n// Password Change\r\nexport const doPasswordUpdate = (password) =>\r\n  auth.currentUser.updatePassword(password);","import { db } from './firebase';\r\n\r\n// User API\r\n\r\nexport const doCreateUser = (id, username, email) =>\r\n  db.ref(`users/${id}`).set({\r\n    username,\r\n    email,\r\n  });\r\n\r\nexport const onceGetUsers = () =>\r\n  db.ref('users').once('value');\r\n\r\n// Other Entity APIs ...","import React, { Component } from 'react';\r\nimport { auth } from '../firebase';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\nconst styles = theme => ({\r\n  layout: {\r\n    width: 'auto',\r\n    display: 'block', // Fix IE11 issue.\r\n    marginLeft: theme.spacing.unit * 3,\r\n    marginRight: theme.spacing.unit * 3,\r\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n      width: 400,\r\n      marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing.unit * 8,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'left',\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE11 issue.\r\n    marginTop: theme.spacing.unit,\r\n  },\r\n  submit: {\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit,\r\n    width: 200,\r\n  },\r\n});\r\n\r\nconst byPropKey = (propertyName, value) => () => ({\r\n  [propertyName]: value,\r\n});\r\n\r\nconst INITIAL_STATE = {\r\n  passwordOne: '',\r\n  passwordTwo: '',\r\n  error: null,\r\n};\r\n\r\nclass PasswordChangeForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { ...INITIAL_STATE };\r\n  }\r\n\r\n  onSubmit = (event) => {\r\n    const { passwordOne } = this.state;\r\n\r\n    auth.doPasswordUpdate(passwordOne)\r\n      .then(() => {\r\n        this.setState({ ...INITIAL_STATE });\r\n      })\r\n      .catch(error => {\r\n        this.setState(byPropKey('error', error));\r\n      });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const {\r\n      passwordOne,\r\n      passwordTwo,\r\n      error,\r\n    } = this.state;\r\n\r\n    const isInvalid =\r\n      passwordOne !== passwordTwo ||\r\n      passwordOne === '';\r\n\r\n    return (\r\n      <>\r\n      <CssBaseline />\r\n      <main className={classes.layout}>\r\n      <form className={classes.form} onSubmit={this.onSubmit}>\r\n        <FormControl margin=\"normal\" required>\r\n          <InputLabel htmlFor=\"email\">Enter new password</InputLabel>\r\n          <Input\r\n            value={passwordOne}\r\n            onChange={event => this.setState(byPropKey('passwordOne', event.target.value))}\r\n            type=\"password\"\r\n            margin=\"normal\"\r\n            className={classes.textField}\r\n          />          \r\n        </FormControl>\r\n        <FormControl margin=\"normal\" required>\r\n          <InputLabel htmlFor=\"email\">Confirm new password</InputLabel>\r\n          <Input\r\n            value={passwordTwo}\r\n            onChange={event => this.setState(byPropKey('passwordTwo', event.target.value))}\r\n            type=\"password\"\r\n            margin=\"normal\"\r\n            className={classes.textField}\r\n          />          \r\n        </FormControl>\r\n        <Button \r\n          disabled={isInvalid} \r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          color=\"default\"\r\n          className={classes.submit}>\r\n          Change Password\r\n        </Button>\r\n      </form>\r\n      </main>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nPasswordChangeForm.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(PasswordChangeForm);","import React from 'react';\r\n\r\nimport AuthUserContext from './AuthUserContext';\r\nimport PasswordChangeForm from './PasswordChange';\r\nimport withAuthorization from './withAuthorization';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n\r\nconst AccountPage = () =>\r\n  <AuthUserContext.Consumer>\r\n    {authUser =>\r\n      <div>\r\n        <Typography variant=\"subtitle1\">\r\n          Account: {authUser.email}\r\n        </Typography>\r\n        {console.log(authUser)}\r\n        <PasswordChangeForm />\r\n      </div>\r\n    }\r\n  </AuthUserContext.Consumer>\r\n\r\nconst authCondition = (authUser) => !!authUser;\r\n\r\nexport default withAuthorization(authCondition)(AccountPage);","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport AuthUserContext from './AuthUserContext';\r\nimport { firebase } from '../firebase';\r\nimport * as routes from '../constants/routes';\r\n\r\nconst withAuthorization = (authCondition) => (Component) => {\r\n  class WithAuthorization extends React.Component {\r\n    componentDidMount() {\r\n      firebase.auth.onAuthStateChanged(authUser => {\r\n        if (!authCondition(authUser)) {\r\n          this.props.history.push(routes.SIGN_IN);\r\n        }\r\n      });\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <AuthUserContext.Consumer>\r\n          {authUser => authUser ? <Component {...this.props} /> : null}\r\n        </AuthUserContext.Consumer>\r\n      );\r\n    }\r\n  }\r\n\r\n  return withRouter(WithAuthorization);\r\n}\r\n\r\nexport default withAuthorization;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport AuthUserContext from '../AuthUserContext';\r\nimport { auth } from '../../firebase';\r\nimport * as routes from '../../constants/routes';\r\nimport AccountPage from '../Account';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  paper: {\r\n    marginRight: theme.spacing.unit * 2,\r\n  },\r\n  account: {\r\n    borderRadius: 0\r\n  },\r\n  menu: {\r\n    top: '4px !important',\r\n    zIndex: 1201\r\n  },\r\n  menuButton: {\r\n    padding: '5px',\r\n    marginRight: '15px'\r\n  },\r\n  modalPaper: {\r\n    position: 'absolute',\r\n    // width: theme.spacing.unit * 50,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing.unit * 4,\r\n    textAlign: 'center',\r\n  },\r\n});\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nclass AccountMenuList extends React.Component {\r\n  state = {\r\n    open: false,\r\n    accountModalOpen: false,\r\n  };\r\n\r\n  handleAccountToggle = () => {\r\n    this.setState(state => ({ open: !state.open }));\r\n  };\r\n\r\n  handleAccountClose = event => {\r\n    if (this.anchorEl.contains(event.target)) {\r\n      return;\r\n    }\r\n    \r\n    this.setState({ open: false });\r\n  };\r\n\r\n  handleAccountModalOpen = (e) => {\r\n    this.handleAccountClose(e)\r\n    this.setState({ accountModalOpen: true });\r\n  }\r\n\r\n  handleAccountModalClose = () => {\r\n    this.setState({ accountModalOpen: false });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { open } = this.state;\r\n\r\n    return (\r\n      <>\r\n      <div className={classes.root}>\r\n        <div>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"Account\"\r\n            buttonRef={node => {\r\n              this.anchorEl = node;\r\n            }}\r\n            aria-owns={open ? 'menu-list-grow' : null}\r\n            aria-haspopup=\"true\"\r\n            onClick={this.handleAccountToggle}\r\n            className={classNames(classes.menuButton)}\r\n          >\r\n            <AccountCircle/>  \r\n          </IconButton>\r\n          <Popper open={open} anchorEl={this.anchorEl} transition disablePortal \r\n            className={classNames(classes.menu)}>\r\n            {({ TransitionProps, placement }) => (\r\n              <Grow\r\n                {...TransitionProps}\r\n                id=\"menu-list-grow\"\r\n                style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n                className={classNames(classes.account)}\r\n              >\r\n                <Paper>\r\n                  <ClickAwayListener onClickAway={this.handleAccountClose}>\r\n                    <MenuList>\r\n                      <AuthUserContext.Consumer>\r\n                        {authUser => authUser\r\n                          ? (\r\n                            <>\r\n                            <MenuItem onClick={(e) => this.handleAccountModalOpen(e)}>\r\n                                Account\r\n                            </MenuItem>\r\n                            <MenuItem onClick={auth.doSignOut}>Log out</MenuItem>\r\n                            </>\r\n                          ) : (\r\n                            <MenuItem onClick={this.handleAccountClose}>\r\n                              <Link to={routes.SIGN_IN} style={{ textDecoration: 'none', color: \"#000\"}}>\r\n                                Sign in\r\n                              </Link>\r\n                            </MenuItem>\r\n                          )\r\n                        }\r\n                      </AuthUserContext.Consumer>\r\n                    </MenuList>\r\n                  </ClickAwayListener>\r\n                </Paper>\r\n              </Grow>\r\n            )}\r\n          </Popper>\r\n        </div>\r\n      </div>\r\n      <Modal\r\n        aria-labelledby=\"account-modal\"\r\n        aria-describedby=\"account-modal-description\"\r\n        open={this.state.accountModalOpen}\r\n        onClose={this.handleAccountModalClose}\r\n      >\r\n        <div style={getModalStyle()} className={classes.modalPaper}>\r\n          <AccountPage />\r\n        </div>\r\n      </Modal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nAccountMenuList.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(AccountMenuList);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuSharp from '@material-ui/icons/MenuSharp';\r\nimport AccountMenu from '../AccountMenu/AccountMenu';\r\nimport AuthUserContext from '../AuthUserContext';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst styles = {\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  appBar: {\r\n    boxShadow: 'none'\r\n  },\r\n  toolBar: {\r\n    maxHeight: '40px',\r\n    minHeight: '40px'\r\n  },\r\n  menuButton: {\r\n    padding: '5px',\r\n    marginRight: '15px'\r\n  },\r\n};\r\n\r\nclass Navbar extends React.Component {\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return(\r\n      <AppBar position=\"static\" color=\"default\"\r\n        className={classes.appBar}\r\n      >\r\n        <Toolbar className={classNames(classes.toolBar)}>\r\n        <AuthUserContext.Consumer>\r\n          {authUser => authUser\r\n            ? (\r\n            <>\r\n              <Tooltip title=\"Toggle notes panel\">\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  aria-label=\"Toggle notes panel\"\r\n                  onClick={this.props.handleLeftDrawer}\r\n                  className={classNames(classes.menuButton, this.props.leftOpen && classes.hide)}\r\n                >\r\n                  <MenuSharp />\r\n                </IconButton>\r\n              </Tooltip>\r\n              <Typography variant=\"title\" color=\"inherit\" style={{flex: 1}}>\r\n                GrantsNotes\r\n              </Typography>\r\n              <Tooltip title=\"Toggle theme\">\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      onChange={this.props.handleThemeToggle}\r\n                      value=\"theme\"\r\n                      color=\"default\"\r\n                    />\r\n                  }\r\n                />\r\n              </Tooltip>\r\n              <AccountMenu/>\r\n            </>\r\n            ) : (\r\n            <>\r\n              <Typography variant=\"title\" color=\"inherit\" style={{flex: 1}}>\r\n                grantsnotes\r\n              </Typography>\r\n              <AccountMenu/>\r\n            </>\r\n            )\r\n          }\r\n        </AuthUserContext.Consumer>\r\n        </Toolbar>\r\n      </AppBar>\r\n    );\r\n  }\r\n}\r\n\r\nNavbar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Navbar);","import axios from \"axios\";\r\n\r\n// export const saveNote =  (NoteData) => {\r\n//     return axios.post(\"/api/note/:id\", NoteData)\r\n// };\r\n\r\n// export const saveUser =  (UserData) => {\r\n//     console.log(\"fishfishfgoatfishapple\" + UserData)\r\n//     return axios.post(\"/api/user\", UserData)\r\n// };\r\n\r\nexport default {\r\n    getNotes: function(userId) {\r\n        return axios.get(\"/api/notes/user/\" + userId)\r\n    },\r\n    saveNote: function(NoteData) {\r\n        return axios.post(\"/api/note\", NoteData);\r\n    },\r\n\r\n    // saveUser: function(UserData) {\r\n    //     console.log(\"fishfishfgoatfishapple\" + UserData)\r\n    //     return axios.post(\"/api/user\", UserData)\r\n    // },\r\n\r\n    getNote: function(id) {\r\n        console.log(id);\r\n        return axios.get(\"/api/\" + id)\r\n    },\r\n\r\n    // updateTitle: function(id, title) {\r\n    //     return axios.put(\"/api/\" + id, title);\r\n    // },\r\n\r\n    updateNote: function(id, body) {\r\n        return axios.put(\"/api/\" + id, body);\r\n    },\r\n\r\n    deleteNote: function (id) {\r\n        return axios.delete(\"/api/\" + id);\r\n    },\r\n\r\n    addSharedUser: function(noteId, userId) {\r\n        return axios.put(\"/api/\" + noteId + \"/\" + userId)\r\n    },\r\n    getSharedNotes: function(userId) {\r\n        return axios.get(\"/api/shared/\" + userId)\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport API from '../../utils/API';\r\n// import Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\n// import Modal from '@material-ui/core/Modal';\r\n// import Typography from \"@material-ui/core/Typography\";\r\nimport {firebase} from '../../firebase';\r\nimport PropTypes from 'prop-types';\r\n// import MenuList from '@material-ui/core/MenuList';\r\n// import MenuItem from '@material-ui/core/MenuItem';\r\n// import DeleteIcon from '@material-ui/icons/Delete';\r\n// import FolderShared from '@material-ui/icons/FolderShared';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n// import ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\n// import Popover from '@material-ui/core/Popover';\r\n// import Layers from '@material-ui/icons/Layers';\r\n// import InputAdornment from '@material-ui/core/InputAdornment';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\n\r\n// import Fade from '@material-ui/core/Fade';\r\n// import CircularProgress from '@material-ui/core/CircularProgress';\r\n// import FolderSharp from '@material-ui/icons/FolderSharp';\r\nimport FolderSharedSharp from '@material-ui/icons/FolderSharedSharp';\r\nimport InsertDriveFileOutlined from '@material-ui/icons/InsertDriveFileOutlined'\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  paper: {\r\n    marginRight: theme.spacing.unit * 2,\r\n    justifyContent: 'flex-end',\r\n  },\r\n  menuItem: {\r\n    '&:focus': {\r\n      backgroundColor: theme.palette.primary.main,\r\n      '& $primary, & $icon': {\r\n        color: theme.palette.common.white,\r\n      },\r\n    },\r\n  },\r\n  primary: {},\r\n  icon: {},\r\n  noteField: {\r\n    justifyContent: 'flex-end',\r\n    width: '100%'\r\n  },\r\n  modalPaper: {\r\n    position: 'absolute',\r\n    width: theme.spacing.unit * 50,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing.unit * 4\r\n  },\r\n  noteFieldEdit: {\r\n    height: '35px',\r\n  },\r\n  noteFieldEditInput: {\r\n    paddingBottom: '10px',\r\n    '&:after': {\r\n      borderBottom: 'none',\r\n    },\r\n    '&:before': {\r\n      borderBottom: 'none',\r\n    }\r\n  },\r\n  noteFieldIcon: {\r\n    transform: 'translate(-10px,5px)'\r\n  },\r\n  noteListItem: {\r\n    padding: '0',\r\n    paddingLeft: '12%', // Not an ideal solution\r\n  },\r\n  input: {\r\n    cursor: 'pointer !important',\r\n  },\r\n  itemText: {\r\n    padding: '0',\r\n  },\r\n  collapser: {\r\n    marginRight: '0',\r\n  },\r\n});\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nclass SharedNotes extends Component {\r\n  state = {\r\n    notes: this.props.notes, // does this even do anything?\r\n    isEditable: [],\r\n    val: [],\r\n    email: \"\",\r\n    targetId: null, // id for context menu to access\r\n    contextOpen: false,\r\n    positionTop: 300, // should these be null by default?\r\n    positionLeft: 400,\r\n    modalOpen: false,\r\n    sharedUser: null,\r\n    toggleShared: true,\r\n    isLoading: false,\r\n    selectedSharedIndex: this.props.selectedSharedIndex,\r\n  };  \r\n\r\n  componentDidMount() {\r\n    firebase.auth.onAuthStateChanged(authUser => {\r\n      if (authUser != null) this.setState({ email: authUser.email, isLoading: true }, function() {\r\n        this.loadNotes();\r\n      })\r\n    })\r\n    console.log(\"NoteList.js componentDidMount()\")\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.selectedSharedIndex !== prevProps.selectedSharedIndex) {\r\n      this.setState({ selectedSharedIndex: this.props.selectedSharedIndex });\r\n      console.log(\"component did update index: \" + this.props.selectedSharedIndex);\r\n    }\r\n  }\r\n\r\n  // is this necessary? \r\n  // componentWillReceiveProps(props) {\r\n  //   // console.log(this.props.notes);\r\n  //   console.log(\"NoteList.js componentWilLReceiveProps()\");\r\n  //   if (this.props.notes.length) {\r\n  //     this.setState({notes: this.props.notes});\r\n  //   }\r\n  // }\r\n\r\n  handleDoubleClick (event, index) {\r\n    let edit = this.state.isEditable.map((val, index) => {\r\n      return (val = false);\r\n    });\r\n    let isEditable = edit.slice();\r\n    isEditable[index] = true;\r\n    this.setState({ isEditable });\r\n  }\r\n\r\n  handleChange (event, id, index) {\r\n    const notes = this.state.notes;\r\n    if (event.target.value !== this.state.notes[index].title) {\r\n      API.updateNote(id, {title: event.target.value} )\r\n      .then(res => this.forceUpdate())\r\n      .catch(err => console.log(err));\r\n    }\r\n    notes[index].title = event.target.value;\r\n    // this.forceUpdate();\r\n  }\r\n\r\n  handleShareChange = (event) => {\r\n    this.setState({sharedUser: event.target.value});\r\n    console.log(this.state.sharedUser);\r\n  }\r\n\r\n  handleSharedSubmit = () => {\r\n    console.log(this.state.sharedUser, this.state.targetId, this.state.email);\r\n    API.getNote(this.state.targetId)\r\n    .then(res => {\r\n      let sharedUserArray = res.data.sharedWith;\r\n      if(sharedUserArray.indexOf(this.state.sharedUser) === -1 || this.state.sharedUser === null) {\r\n        console.log(\"Not in array\")\r\n        API.addSharedUser(this.state.targetId, this.state.sharedUser)\r\n      } else {\r\n        console.log(\"In array\")\r\n      }\r\n    })\r\n  }\r\n  // User hits enter\r\n  keyPress(event, id, index) {\r\n    if (event.keyCode === 13) {\r\n      this.handleBlur(event, id, index);\r\n    }\r\n  }\r\n\r\n  // User clicks out of active field\r\n  handleBlur (event, id, index) {\r\n    let edit = this.state.isEditable.map((val, index) => {\r\n      return (val = false);\r\n    });\r\n    let isEditable = edit.slice();\r\n    isEditable[index] = false;\r\n    this.setState({ isEditable });\r\n  }\r\n\r\n  handleFocus (event) {\r\n    event.target.select();\r\n  }\r\n\r\n  // User right clicks on note title in sidebar\r\n  handleContextMenu = (event, id) => {\r\n    event.preventDefault();\r\n    \r\n    console.log(event);\r\n    console.log(id); // logs id of note that was right clicked\r\n\r\n    // notes:\r\n    // currently user can't have the context menu open, then immediately close and open a new context menu with one click\r\n    \r\n    this.setState({ \r\n      positionTop: event.clientY,\r\n      positionLeft: event.clientX,\r\n      contextOpen: !this.state.contextOpen,\r\n      targetId: id\r\n    });\r\n  }\r\n\r\n  // Closes context menu. Needs event so we can prevent default when user right clicks outside an open context menu.\r\n  handleClose = (event) => {\r\n    event.preventDefault();\r\n    this.setState({ contextOpen: false });\r\n    console.log(\"handleClose() fired\");\r\n  };\r\n\r\n  loadNotes = () => {\r\n    console.log(this.state.email);\r\n    API.getSharedNotes(this.state.email)\r\n      .then(res => this.setState({ notes: res.data }))\r\n      .catch(err => console.log(err));    \r\n  }\r\n\r\n  // refreshNewNote = (email) => {\r\n  //   console.log('Ran refreshNewNote function from NoteList.js.');\r\n  //   API.getSharedNotes(email)\r\n  //     .then(res => this.setState({ notes: res.data }, () => {this.handleSelectRefresh(this.state.notes[0]._id);}))\r\n  //     .catch(err => console.log(err));\r\n\r\n  //   // this seems clunky\r\n  //   setTimeout(\r\n  //     function() {\r\n  //       let edit = this.state.isEditable.map((val) => {\r\n  //         return (val = false);\r\n  //       });\r\n  //       this.props.handleSelectedIndex(0);\r\n  //       let isEditable = edit.slice();\r\n  //       isEditable[0] = true;\r\n  //       this.setState({ isEditable });\r\n  //     }\r\n  //     .bind(this),\r\n  //     310\r\n  //   );\r\n  // }\r\n\r\n  handleSharedToggle = () => {\r\n    this.setState({ toggleShared: !this.state.toggleShared });\r\n  }\r\n\r\n  handleSelectRefresh = (id) => {\r\n    console.log(\"Hit handleSelectRefresh function.\");\r\n    console.log(\"Running GET for \" + this.state.email);\r\n    API.getSharedNotes(this.state.email)\r\n    .then(res => this.setState({ notes: res.data }, () => {\r\n      console.log(this.state.notes);\r\n      let newContent;\r\n      for (var i = 0; i < this.state.notes.length; i++) {\r\n        if (this.state.notes[i]._id === id) {\r\n          console.log(\"ID match: \" + this.state.notes[i]._id);\r\n          console.log(this.state.notes[i].title);\r\n\r\n          newContent = this.state.notes[i].content;\r\n          this.props.handleSelectedNote(id, newContent);\r\n        }\r\n      }\r\n    }))\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  handleOpen = (event) => {\r\n    event.preventDefault();\r\n    this.handleClose(event);\r\n    this.setState({ modalOpen: true });\r\n  };\r\n\r\n  handleModalClose = () => {\r\n    this.setState({ modalOpen: false });\r\n  };\r\n\r\n  // need to select the \"next\" note when one note is deleted, otherwise the body stays the same\r\n  deleteNote = (event, id) => {\r\n    this.handleClose(event);\r\n    API.deleteNote(id)\r\n      .then(res => this.loadNotes())\r\n      .catch(err => console.log(err));\r\n  }\r\n \r\n  render() {\r\n    const { classes } = this.props;\r\n    const {\r\n      contextOpen,\r\n    } = this.state;\r\n\r\n    return(\r\n    <>\r\n      {this.state.notes.length ? (\r\n      <>\r\n        <List>\r\n          <ListItem button onClick={this.handleSharedToggle}>\r\n            <ListItemIcon>\r\n              <FolderSharedSharp />\r\n            </ListItemIcon>\r\n            <ListItemText className={classes.itemText} primary=\"Shared with me\" />\r\n            <ListItemIcon className={classes.collapser}>\r\n              {this.state.toggleShared ? <ExpandLess /> : <ExpandMore />}\r\n            </ListItemIcon>\r\n          </ListItem>\r\n        {this.state.notes.map((note, index) => {\r\n          return (\r\n            <Collapse in={this.state.toggleShared} timeout=\"auto\" unmountOnExit key={note._id}>\r\n              <List component=\"div\" disablePadding>\r\n                <ListItem \r\n                  button\r\n                  className={`${classes.nested} ${classes.noteListItem}`}\r\n                  selected={this.state.selectedSharedIndex === index}\r\n                >\r\n                <TextField\r\n                  className={classes.noteField}\r\n                  key={note._id}\r\n                  InputProps={{\r\n                    readOnly: true,\r\n                    className: classes.input,\r\n                    disableUnderline: true,\r\n                    startAdornment: (\r\n                      <ListItemIcon position=\"start\">\r\n                        <InsertDriveFileOutlined />\r\n                      </ListItemIcon>\r\n                    ),\r\n                  }}\r\n                  defaultValue={note.title}\r\n                  onClick={() => {this.handleSelectRefresh(note._id); this.props.handleSharedIndex(index); }}\r\n                  aria-owns={contextOpen ? 'simple-menu' : null}\r\n                  aria-haspopup=\"true\"\r\n                  onContextMenu={(e) => this.handleContextMenu(e, note._id)}\r\n                />\r\n                </ListItem>\r\n              </List>\r\n            </Collapse>\r\n            );\r\n          })}\r\n        </List>\r\n      </>\r\n      ) : (\r\n      <>\r\n        {this.state.isLoading ? (\r\n          <></>\r\n        ) : (\r\n          <></>\r\n        )}\r\n        </>\r\n      )\r\n      }\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nSharedNotes.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default withStyles(styles)(SharedNotes);","import React, { Component } from 'react';\r\nimport API from '../../utils/API';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {firebase} from '../../firebase';\r\nimport PropTypes from 'prop-types';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport FolderShared from '@material-ui/icons/FolderShared';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Popover from '@material-ui/core/Popover';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\n\r\nimport Fade from '@material-ui/core/Fade';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport FolderSharp from '@material-ui/icons/FolderSharp';\r\nimport InsertDriveFileOutlined from '@material-ui/icons/InsertDriveFileOutlined';\r\nimport green from '@material-ui/core/colors/green';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  paper: {\r\n    marginRight: theme.spacing.unit * 2,\r\n    justifyContent: 'flex-end',\r\n  },\r\n  noteField: {\r\n    justifyContent: 'flex-end',\r\n    width: '100%',\r\n  },\r\n  modalPaper: {\r\n    position: 'absolute',\r\n    width: theme.spacing.unit * 50,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing.unit * 4\r\n  },\r\n  noteFieldEdit: {\r\n    height: '35px',\r\n  },\r\n  noteFieldEditInput: {\r\n    paddingBottom: '10px',\r\n    '&:after': {\r\n      borderBottom: 'none',\r\n    },\r\n    '&:before': {\r\n      borderBottom: 'none',\r\n    }\r\n  },\r\n  noteFieldIcon: {\r\n    transform: 'translate(-10px,5px)'\r\n  },\r\n  noteListItem: {\r\n    padding: '0',\r\n    paddingLeft: '12%', // Not an ideal solution\r\n  },\r\n  input: {\r\n    cursor: 'default !important',\r\n  },\r\n  itemText: {\r\n    padding: '0',\r\n    font: '12px',\r\n  },\r\n  collapsers: {\r\n    marginRight: '0',\r\n  },\r\n});\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nclass NoteList extends Component {\r\n  state = {\r\n    isMounted: false,\r\n    notes: this.props.notes, // does this even do anything?\r\n    isEditable: [],\r\n    val: [],\r\n    email: \"\",\r\n    targetId: null, // id for context menu to access\r\n    targetIndex: null, // index for context menu delete action to check\r\n    contextOpen: false,\r\n    positionTop: 300, // should these be null by default?\r\n    positionLeft: 400,\r\n    modalOpen: false,\r\n    sharedUser: null,\r\n    toggleNotes: true,\r\n    toggleShared: true,\r\n    isLoading: false,\r\n    selectedIndex: this.props.selectedIndex,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({ isMounted: true }, () => {\r\n      firebase.auth.onAuthStateChanged(authUser => {\r\n        if (authUser != null && this.state.isMounted) this.setState({ email: authUser.email, isLoading: true }, function() {\r\n          this.loadNotes();\r\n        })\r\n      })\r\n    });\r\n    console.log(\"NoteList.js componentDidMount()\")\r\n  }\r\n\r\n  componentWillUnount() {\r\n    this.setState({ isMounted: false });\r\n  }\r\n\r\n  // is this necessary? \r\n  // componentWillReceiveProps(props) {\r\n  //   // console.log(this.props.notes);\r\n  //   console.log(\"NoteList.js componentWilLReceiveProps()\");\r\n  //   if (this.props.notes.length) {\r\n  //     this.setState({notes: this.props.notes});\r\n  //   }\r\n  // }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.selectedIndex !== prevProps.selectedIndex) {\r\n      this.setState({ selectedIndex: this.props.selectedIndex });\r\n      console.log(\"component did update index: \" + this.props.selectedIndex);\r\n    }\r\n  }\r\n\r\n  handleDoubleClick (event, index) {\r\n    let edit = this.state.isEditable.map((val, index) => {\r\n      return (val = false);\r\n    });\r\n    let isEditable = edit.slice();\r\n    isEditable[index] = true;\r\n    this.setState({ isEditable });\r\n  }\r\n\r\n  handleChange (event, id, index) {\r\n    const notes = this.state.notes;\r\n    if (event.target.value !== this.state.notes[index].title) {\r\n      API.updateNote(id, {title: event.target.value} )\r\n      .then(res => this.forceUpdate())\r\n      .catch(err => console.log(err));\r\n    }\r\n    notes[index].title = event.target.value;\r\n  }\r\n\r\n  handleShareChange = (event) => {\r\n    this.setState({sharedUser: event.target.value});\r\n    console.log(this.state.sharedUser);\r\n  }\r\n\r\n  handleSharedSubmit = () => {\r\n    console.log(this.state.sharedUser, this.state.targetId, this.state.email);\r\n    API.getNote(this.state.targetId)\r\n    .then(res => {\r\n      let sharedUserArray = res.data.sharedWith;\r\n      if(sharedUserArray.indexOf(this.state.sharedUser) === -1 || this.state.sharedUser === null) {\r\n        console.log(\"Not in array\")\r\n\r\n        API.addSharedUser(this.state.targetId, this.state.sharedUser)\r\n      } else {\r\n        console.log(\"In array\")\r\n      }\r\n      this.handleModalClose();\r\n    })\r\n  }\r\n  // User hits enter\r\n  keyPress(event, id, index) {\r\n    if (event.keyCode === 13) {\r\n      this.handleBlur(event, id, index);\r\n    }\r\n  }\r\n\r\n  // User clicks out of active field\r\n  handleBlur (event, id, index) {\r\n    let edit = this.state.isEditable.map((val, index) => {\r\n      return (val = false);\r\n    });\r\n    let isEditable = edit.slice();\r\n    isEditable[index] = false;\r\n    this.setState({ isEditable });\r\n  }\r\n\r\n  handleFocus (event) {\r\n    event.target.select();\r\n  }\r\n\r\n  // User right clicks on note title in sidebar\r\n  handleContextMenu = (event, id, index) => {\r\n    event.preventDefault();\r\n    \r\n    // console.log(event);\r\n    // console.log(id);\r\n    \r\n    this.setState({ \r\n      positionTop: event.clientY,\r\n      positionLeft: event.clientX,\r\n      contextOpen: !this.state.contextOpen,\r\n      targetId: id,\r\n      targetIndex: index,\r\n    });\r\n  }\r\n\r\n  // Closes context menu. Needs event so we can prevent default when user right clicks outside an open context menu.\r\n  handleCloseContext = (event) => {\r\n    event.preventDefault();\r\n    this.setState({ contextOpen: false });\r\n    console.log(\"handleCloseContext() fired\");\r\n  };\r\n\r\n  loadNotes = () => {\r\n    API.getNotes(this.state.email)\r\n      .then(res => this.setState({ notes: res.data }, () => this.setState({ isLoading: false })))\r\n      .catch(err => console.log(err));    \r\n  }\r\n\r\n  refreshNewNote = (email) => {\r\n    console.log('Ran refreshNewNote function from NoteList.js.');\r\n    API.getNotes(email)\r\n      .then(res => this.setState({ notes: res.data }, () => {this.handleSelectRefresh(this.state.notes[0]._id);}))\r\n      .catch(err => console.log(err));\r\n\r\n    // this seems clunky\r\n    setTimeout(\r\n      function() {\r\n        let edit = this.state.isEditable.map((val) => {\r\n          return (val = false);\r\n        });\r\n        this.props.handleSelectedIndex(0);\r\n        let isEditable = edit.slice();\r\n        isEditable[0] = true;\r\n        this.setState({ isEditable });\r\n      }\r\n      .bind(this),\r\n      310\r\n    );\r\n  }\r\n\r\n  handleSelectRefresh = (id) => {\r\n    // console.log(\"Hit handleSelectRefresh function.\");\r\n    // console.log(\"Running GET for \" + this.state.email);\r\n    API.getNotes(this.state.email)\r\n    .then(res => this.setState({ notes: res.data }, () => {\r\n      console.log(this.state.notes);\r\n      let newContent;\r\n      for (var i = 0; i < this.state.notes.length; i++) {\r\n        if (this.state.notes[i]._id === id) {\r\n          console.log(\"ID match: \" + this.state.notes[i]._id);\r\n          console.log(this.state.notes[i].title);\r\n\r\n          newContent = this.state.notes[i].content;\r\n          this.props.handleSelectedNote(id, newContent);\r\n        }\r\n      }\r\n    }))\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  // handleSelectedIndex = (index) => {\r\n  //   this.setState({ selectedIndex: index });\r\n  // }\r\n\r\n  handleOpenModal = (event) => {\r\n    event.preventDefault();\r\n    this.handleCloseContext(event);\r\n    this.setState({ modalOpen: true });\r\n  };\r\n\r\n  handleModalClose = () => {\r\n    this.setState({ modalOpen: false });\r\n  };\r\n\r\n  // When user deletes a note, select the note with the same index or index-1 if it's the last note\r\n  handleDeleteRefresh = (targetIndex) => {\r\n    API.getNotes(this.state.email)\r\n    .then(res => this.setState({ notes: res.data }, () => {\r\n      let index;\r\n      if (targetIndex === this.state.notes.length) {\r\n        index = targetIndex - 1;\r\n      }\r\n      else {\r\n        index = targetIndex;\r\n      }\r\n      let note = this.state.notes[index]\r\n      this.props.handleSelectedNote(note._id, note.content);\r\n      // this.handleSelectedIndex(index);\r\n      this.props.handleSelectedIndex(index);\r\n    }))\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  // need to select the \"next\" note when one note is deleted, otherwise the body stays the same\r\n  deleteNote = (event, id, targetIndex) => {\r\n    console.log('Delete method called.');\r\n    this.handleCloseContext(event);\r\n    API.deleteNote(id)\r\n      .then(res => {\r\n        if (targetIndex === this.state.selectedIndex) this.handleDeleteRefresh(targetIndex)\r\n        else this.loadNotes()\r\n        })\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  handleNotesToggle = () => {\r\n    this.setState({ toggleNotes: !this.state.toggleNotes });\r\n  };\r\n\r\n  // handleSharedToggle = () => {\r\n  //   this.setState({ toggleShared: !this.state.toggleShared });\r\n  // }\r\n \r\n  render() {\r\n    const { classes } = this.props;\r\n    const {\r\n      targetId,\r\n      targetIndex,\r\n      contextOpen,\r\n      positionTop,\r\n      positionLeft,\r\n    } = this.state;\r\n\r\n    return(\r\n      <>\r\n      {this.state.notes.length ? (\r\n        <>\r\n        <List>\r\n          <ListItem button onClick={this.handleNotesToggle}>\r\n            <ListItemIcon>\r\n              <FolderSharp />\r\n            </ListItemIcon>\r\n            <ListItemText className={classes.itemText} primary=\"My notes\" />\r\n            <ListItemIcon className={classes.collapsers}>\r\n              {this.state.toggleNotes ? <ExpandLess /> : <ExpandMore />}\r\n            </ListItemIcon>\r\n          </ListItem>\r\n        {this.state.notes.map((note, index) => {\r\n          return (\r\n          // <>\r\n          <Collapse in={this.state.toggleNotes} timeout=\"auto\" unmountOnExit key={note._id}>\r\n            <List component=\"div\" disablePadding>\r\n            <ListItem\r\n              button\r\n              className={`${classes.nested} ${classes.noteListItem}`}\r\n              selected={this.state.selectedIndex === index}\r\n            >\r\n            {this.state.isEditable[index] ? (\r\n              // Editable text field\r\n              <TextField\r\n                className={`${classes.noteField} ${classes.noteFieldEdit}`}\r\n                key={note._id}\r\n                autoFocus={true}\r\n                onFocus={this.handleFocus}\r\n                defaultValue={note.title}\r\n                variant=\"filled\"\r\n                onChange={(e) => this.handleChange(e, note._id, index)}\r\n                onBlur={(e) => this.handleBlur(e, note._id, index)}\r\n                onKeyDown={(e) => this.keyPress(e, note._id, index)}\r\n                InputProps={{\r\n                  className: classes.noteFieldEditInput,\r\n                  startAdornment: (\r\n                    <ListItemIcon className={classes.noteFieldIcon} position=\"start\">\r\n                      <InsertDriveFileOutlined />\r\n                    </ListItemIcon>\r\n                  ),\r\n                }}\r\n              />\r\n            ) : (\r\n              // Read only text field\r\n              <TextField\r\n                className={classes.noteField}\r\n                key={note._id}\r\n                selected={this.state.selected}\r\n                InputProps={{\r\n                  readOnly: true,\r\n                  className: classes.input,\r\n                  disableUnderline: true,\r\n                  startAdornment: (\r\n                    <ListItemIcon position=\"start\">\r\n                      <InsertDriveFileOutlined />\r\n                    </ListItemIcon>\r\n                  ),\r\n                }}\r\n                defaultValue={note.title}\r\n                onClick={() => {this.handleSelectRefresh(note._id); this.props.handleSelectedIndex(index); }}\r\n                onDoubleClick={(e) => this.handleDoubleClick(e, index)}\r\n                aria-owns={contextOpen ? 'simple-menu' : null}\r\n                aria-haspopup=\"true\"\r\n                onContextMenu={(e) => this.handleContextMenu(e, note._id, index)}\r\n              />\r\n            )}\r\n            </ListItem>\r\n            </List>\r\n          </Collapse>\r\n          // </>\r\n          );\r\n        })}\r\n        </List>\r\n        <Popover\r\n          open={contextOpen}\r\n          anchorEl={this.anchorEl}\r\n          anchorReference=\"anchorPosition\"\r\n          anchorPosition={{ top: positionTop, left: positionLeft }}\r\n          anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'right',\r\n          }}\r\n          transformOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'left',\r\n          }}\r\n          hideBackdrop\r\n        >\r\n        \r\n        <ClickAwayListener \r\n          onContextMenu={(e) => this.handleCloseContext(e)}\r\n          onClickAway={(e) => this.handleCloseContext(e)}        \r\n        >\r\n          <MenuList>\r\n            <MenuItem \r\n              className={classes.menuitem}\r\n              onClick={(e) => {this.handleOpenModal(e)}}\r\n            >\r\n              <ListItemIcon className={classes.icon}>\r\n                <FolderShared/>\r\n              </ListItemIcon>\r\n              <ListItemText classes={{ primary: classes.primary }} inset primary=\"Share\"/>\r\n            </MenuItem>\r\n            <MenuItem \r\n              className={classes.menuitem}\r\n              onClick={(e) => { this.deleteNote(e, targetId, targetIndex); this.props.handleDeleteAlert(); }}>\r\n              <ListItemIcon className={classes.icon}>\r\n                <DeleteIcon/>\r\n              </ListItemIcon>\r\n              <ListItemText classes={{ primary: classes.primary }} inset primary=\"Delete\"/>\r\n            </MenuItem>\r\n          </MenuList>\r\n        </ClickAwayListener>\r\n        </Popover>\r\n        <Modal\r\n          aria-labelledby=\"simple-modal-title\"\r\n          aria-describedby=\"simple-modal-description\"\r\n          open={this.state.modalOpen}\r\n          onClose={this.handleModalClose}\r\n        >\r\n          <div style={getModalStyle()} className={classes.modalPaper}>\r\n            <Typography>\r\n              Who Do You Want To Share With?\r\n            </Typography>\r\n            <TextField\r\n              id=\"standard-full-width\"\r\n              label=\"Please enter an email below\"\r\n              style={{ margin: 8 }}\r\n              placeholder=\"Email Address\"\r\n              fullWidth\r\n              margin=\"normal\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              onChange={(event) => this.handleShareChange(event)}\r\n            />\r\n          <Button \r\n            variant=\"contained\"\r\n            color=\"default\"\r\n            className={classes.button}\r\n            onClick={() => this.handleSharedSubmit()}\r\n          >\r\n            Share\r\n          </Button>\r\n        </div>\r\n        </Modal>\r\n        </>\r\n      ) : (\r\n        <>\r\n        {this.state.isLoading ? (\r\n          <Fade\r\n            in={this.state.isLoading}\r\n            style={{\r\n              transitionDelay: this.state.isLoading ? '800ms' : '0ms',\r\n            }}\r\n            unmountOnExit\r\n          >\r\n            <CircularProgress style={{ color: green[500] }}/>\r\n          </Fade>\r\n        ) : (\r\n          <p>No notes to display.</p>\r\n        )}\r\n        </>\r\n      )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nNoteList.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default withStyles(styles)(NoteList);","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SharedNotes from '../SharedNotes/SharedNotes';\r\nimport AddSharp from '@material-ui/icons/AddSharp';\r\nimport VerticalAlignBottomSharp from '@material-ui/icons/VerticalAlignBottomSharp';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport NoteList from '../NoteList/NoteList';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport API from '../../utils/API';\r\nimport {firebase} from \"../../firebase\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  appFrame: {\r\n    height: '100vh', // Important\r\n    zIndex: 1,\r\n    overflow: 'hidden',\r\n    position: 'relative',\r\n    // display: 'flex',\r\n    width: '100%',\r\n    borderBottom: \"\"\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    position: 'absolute',\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  'appBarShift-left': {\r\n    marginLeft: drawerWidth,\r\n    // marginLeft: 0\r\n  },\r\n  'appBarShift-right': {\r\n    marginRight: drawerWidth,\r\n    // marginLeft: 0\r\n  },\r\n  menuButton: {\r\n    padding: '5px',\r\n    borderRadius: 0,\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawerPaper: {\r\n    position: 'relative',\r\n    display: 'block',\r\n    [theme.breakpoints.down('sm')]: {\r\n      width: '100%',\r\n      height: '100vh',\r\n    },\r\n    [theme.breakpoints.up('md')]: {\r\n      // width: '240px',\r\n      minWidth: '225px',\r\n      height: `calc(100vh - 74px)`\r\n    },\r\n  },\r\n  headerPaper: {\r\n    position: 'relative',\r\n    display: 'block',\r\n    [theme.breakpoints.down('sm')]: {\r\n      width: '100%'\r\n    },\r\n    [theme.breakpoints.up('md')]: {\r\n      // width: '240px'\r\n      minWidth: '225px',\r\n    },\r\n  },\r\n  drawerHeaderL: {\r\n    // position: 'absolute',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: '0 8px',\r\n    ...theme.mixins.toolbar,\r\n  },\r\n});\r\n\r\n\r\nclass LeftDrawer extends Component {\r\n\r\n  state = {\r\n    title: \"Untitled\",\r\n    body: \"\",\r\n    notes: [],\r\n    email: \"\",\r\n    selectedIndex: null,\r\n    selectedSharedIndex: null,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleNewNote = this.handleNewNote.bind(this);\r\n    this.handleSelectedNote = this.props.handleSelectedNote.bind(this);\r\n    this.handleDeleteAlert = this.props.handleDeleteAlert.bind(this);\r\n    this.child = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    firebase.auth.onAuthStateChanged(authUser => {\r\n      if (authUser != null) this.setState({ email: authUser.email })\r\n    })\r\n  }\r\n\r\n  handleNewNote () {\r\n    console.log(\"Hit handleNewNote function\");\r\n    console.log(this.state.title);\r\n\r\n    const initialValue = {\r\n      document: {\r\n        nodes: [\r\n          {\r\n            object: 'block',\r\n            type: 'paragraph',\r\n            nodes: [\r\n              {\r\n                object: 'text',\r\n                leaves: [\r\n                  {\r\n                    text: \"\",\r\n                  },\r\n                ],\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      },\r\n    }\r\n\r\n    API.saveNote({\r\n      title: \"Untitled\",\r\n      userId: this.state.email,\r\n      content: JSON.stringify(initialValue)\r\n    })\r\n      .then(this.child.current.refreshNewNote(this.state.email));\r\n  };\r\n\r\n  handleSelectedIndex = (index) => {\r\n    console.log(index);\r\n    console.log(\"LEFTDRAWER HANDLE SELECTED INDEX FUNCTION\")\r\n    // console.log(this.state.selectedIndex);\r\n    this.setState({ selectedIndex: index, selectedSharedIndex: null });\r\n  }\r\n\r\n  handleSharedIndex = (index) => {\r\n    console.log(index);\r\n    console.log(this.state.selectedSharedIndex);\r\n    this.setState({ selectedSharedIndex: index, selectedIndex: null })\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    const drawer = (\r\n      <>\r\n        <Divider/>\r\n        <NoteList\r\n          notes={this.state.notes}\r\n          handleSelectedNote={this.handleSelectedNote}\r\n          handleDeleteAlert={this.props.handleDeleteAlert}\r\n          innerRef={this.child}\r\n          selectedIndex={this.state.selectedIndex}\r\n          handleSelectedIndex={this.handleSelectedIndex}\r\n        />\r\n        <SharedNotes\r\n          notes={this.state.notes}\r\n          handleSelectedNote={this.handleSelectedNote}\r\n          selectedSharedIndex={this.state.selectedSharedIndex}\r\n          handleSharedIndex={this.handleSharedIndex}\r\n        />\r\n      </>\r\n    )\r\n\r\n    const header = (\r\n      <div className={classes.drawerHeaderL} style={{ minHeight: '34px', maxHeight: '34px'}}>\r\n        <Tooltip title=\"New note\">\r\n          <IconButton \r\n            className={classes.menuButton}\r\n            onClick={this.handleNewNote}>\r\n            <AddSharp\r\n              title={this.state.title}\r\n              body={this.state.body}/>\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Tooltip title=\"Close notes panel\">\r\n          <IconButton \r\n            className={classes.menuButton}\r\n            onClick={this.props.handleLeftDrawer}>\r\n            <VerticalAlignBottomSharp\r\n              style={{\r\n                transform: 'rotate(90deg)',\r\n              }}\r\n            />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </div>\r\n    )\r\n\r\n    return (\r\n        <>\r\n        <Hidden mdUp>\r\n          <Drawer\r\n            variant=\"temporary\"\r\n            open={this.props.leftOpen}\r\n            classes={{\r\n              paper: classes.drawerPaper,\r\n            }}\r\n          >\r\n            {header}\r\n            {drawer}\r\n          </Drawer>\r\n        </Hidden>\r\n\r\n        <Hidden smDown implementation=\"css\">\r\n            <Drawer\r\n              variant=\"persistent\"\r\n              open={this.props.leftOpen}\r\n              classes={{\r\n                paper: classes.headerPaper,\r\n              }}\r\n            >\r\n              {header}\r\n            </Drawer>\r\n            <Drawer\r\n              variant=\"persistent\"\r\n              open={this.props.leftOpen}\r\n              classes={{\r\n                paper: classes.drawerPaper,\r\n              }}\r\n            >\r\n              {drawer}\r\n            </Drawer>\r\n        </Hidden>\r\n        </>\r\n    );\r\n  }\r\n}\r\n\r\nLeftDrawer.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(LeftDrawer);","import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { auth, db } from '../firebase';\r\nimport * as routes from '../constants/routes';\r\nimport API from \"../utils/API\";\r\n\r\nimport PropTypes from 'prop-types';\r\n// import Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n// import FormControlLabel from '@material-ui/core/FormControlLabel';\r\n// import Checkbox from '@material-ui/core/Checkbox';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n// import LockIcon from '@material-ui/icons/LockOutlined';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\n\r\n\r\n\r\n\r\nconst styles = theme => ({\r\n  layout: {\r\n    width: 'auto',\r\n    display: 'block', // Fix IE11 issue.\r\n    marginLeft: theme.spacing.unit * 3,\r\n    marginRight: theme.spacing.unit * 3,\r\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n      width: 400,\r\n      // marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing.unit * 8,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'left',\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  // avatar: {\r\n  //   margin: theme.spacing.unit,\r\n  //   backgroundColor: theme.palette.secondary.main,\r\n  // },\r\n  form: {\r\n    width: '100%', // Fix IE11 issue.\r\n    marginTop: theme.spacing.unit,\r\n  },\r\n  submit: {\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\nconst SignUpPage = ({ history }) =>\r\n\r\n  <>\r\n    <SignUpForm history={history} />\r\n  </>\r\n\r\nconst INITIAL_STATE = {\r\n  username: '',\r\n  email: '',\r\n  passwordOne: '',\r\n  passwordTwo: '',\r\n  error: null,\r\n};\r\n\r\nconst byPropKey = (propertyName, value) => () => ({\r\n  [propertyName]: value,\r\n});\r\n\r\nclass SignUpForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  \r\n\r\n  this.state = { ...INITIAL_STATE };\r\n  }\r\n\r\n  onSubmit = (event) => {\r\n    const {\r\n      username,\r\n      email,\r\n      passwordOne,\r\n    } = this.state;\r\n\r\n    const {\r\n      history,\r\n    } = this.props;\r\n\r\n    auth.doCreateUserWithEmailAndPassword(email, passwordOne)\r\n      .then(authUser => {\r\n        db.doCreateUser(authUser.user.uid, username, email)\r\n          .then(() => {\r\n            this.setState({ ...INITIAL_STATE });\r\n            history.push(routes.HOME);\r\n          })\r\n          .catch(error => {\r\n            this.setState(byPropKey('error', error));\r\n          });\r\n\r\n      })\r\n      .catch(error => {\r\n        this.setState(byPropKey('error', error));\r\n      });\r\n      event.preventDefault();\r\n\r\n      // if(this.state.username && this.state.email) {\r\n        \r\n      //   API.saveUser({\r\n      //       username: this.state.username,\r\n      //       email: this.state.email\r\n      //   })}\r\n    \r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    const {\r\n      username,\r\n      email,\r\n      passwordOne,\r\n      passwordTwo,\r\n      // error,\r\n    } = this.state;\r\n\r\n    const isInvalid =\r\n      passwordOne !== passwordTwo ||\r\n      passwordOne === '' ||\r\n      email === '' ||\r\n      username === '';\r\n\r\n\r\n    return (\r\n      <React.Fragment>\r\n          <CssBaseline />\r\n          <main className={classes.layout}>\r\n            <Paper className={classes.paper}>\r\n              <Typography variant=\"headline\">Sign up for free!</Typography>\r\n              <form className={classes.form} onSubmit={this.onSubmit}>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <InputLabel htmlFor=\"name\">Account Name</InputLabel>\r\n                  <Input\r\n                    onChange={event => this.setState(byPropKey('username', event.target.value))}\r\n                    type=\"text\"\r\n                    placeholder=\"Your account name.\"\r\n                    autoFocus \r\n                  />\r\n                </FormControl>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <InputLabel htmlFor=\"email\">Email Address</InputLabel>\r\n                  <Input \r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    autoComplete=\"email\"\r\n                    onChange={event => this.setState(byPropKey('email', event.target.value))}\r\n                    placeholder=\"Your email address will be used for logging in.\"\r\n                  />\r\n                </FormControl>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                  <Input\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    id=\"passwordOne\"\r\n                    autoComplete=\"current-password\"\r\n                    placeholder=\"Password must be at least 6 characters long.\"\r\n                    onChange={event => this.setState(byPropKey('passwordOne', event.target.value))}\r\n                  />\r\n                </FormControl>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <InputLabel htmlFor=\"password\">Confirm password</InputLabel>\r\n                  <Input\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    id=\"passwordTwo\"\r\n                    autoComplete=\"current-password\"\r\n                    placeholder=\"Type your password again.\"\r\n                    onChange={event => this.setState(byPropKey('passwordTwo', event.target.value))}\r\n                  />\r\n                </FormControl>\r\n                <Button\r\n                  disabled={isInvalid}\r\n                  type=\"submit\"\r\n                  fullWidth\r\n                  variant=\"raised\"\r\n                  color=\"default\"\r\n                  className={classes.submit}\r\n                >\r\n                  Create Account\r\n                </Button>\r\n                <FormControl margin=\"normal\" fullWidth>\r\n                  <Link to={routes.SIGN_IN}>Already have an account?</Link>\r\n                </FormControl>\r\n              </form>\r\n            </Paper>\r\n          </main>\r\n        </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst SignUpLink = () =>\r\n  <p>\r\n    Don't have an account?\r\n    {' '}\r\n    <Link to={routes.SIGN_UP}>Sign Up</Link>\r\n  </p>\r\n\r\nSignUpForm.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\n// export default withRouter(SignUpPage);\r\nexport default withRouter(withStyles(styles)(SignUpForm));\r\nconst SignUp1 = withRouter(SignUpPage);\r\nconst SignUp2 = withStyles(styles)(SignUpForm);\r\n\r\n// export {\r\n//   SignUpForm,\r\n//   SignUpLink,\r\n// };\r\n\r\nexport { SignUp1, SignUp2 };\r\n// export {withStyles(styles)(SignUpForm)};","// Import React!\r\nimport React from 'react';\r\nimport { Editor } from 'slate-react';\r\nimport { Value } from 'slate';\r\nimport API from '../utils/API';\r\n// import AuthUserContext from './AuthUserContext';\r\nimport {firebase} from '../firebase';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = {\r\n  scroll: {\r\n    overflowY: 'scroll',\r\n    height: 'calc(100vh - 90px)'\r\n  }\r\n}\r\n\r\nconst initialValue = Value.fromJSON({\r\n  document: {\r\n    nodes: [\r\n      {\r\n        object: 'block',\r\n        type: 'paragraph',\r\n        nodes: [\r\n          {\r\n            object: 'text',\r\n            leaves: [\r\n              {\r\n                text: \"Stuff from NoteArea\",\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n  },\r\n})\r\n\r\n\r\nclass NoteArea extends React.Component {\r\n\r\n  componentDidMount() {\r\n    firebase.auth.onAuthStateChanged(authUser => {\r\n      this.setState({ email: authUser.email })\r\n    })\r\n  }\r\n\r\n  // componentWillReceiveProps() {\r\n  componentDidUpdate(prevProps) {\r\n    console.log('content prop: ' + this.props.selectedNoteBody);\r\n    console.log('id prop: ' + this.props.selectedNoteID);\r\n    console.log(\"------------------------\");\r\n\r\n    if (this.props.selectedNoteID !== prevProps.selectedNoteID) {\r\n      let contentStr = this.props.selectedNoteBody;\r\n      let contentObj = JSON.parse(contentStr);\r\n      let slateContent = Value.fromJSON(contentObj);\r\n\r\n      this.setState({ \r\n        value: slateContent,\r\n        id: this.props.selectedNoteID,\r\n      })\r\n    }\r\n\r\n    // if (this.props.selectedNoteBody) {\r\n    //   let contentStr = this.props.selectedNoteBody;\r\n    //   let contentObj = JSON.parse(contentStr);\r\n    //   let slateContent = Value.fromJSON(contentObj);\r\n      \r\n    //   this.setState({ \r\n    //     value: slateContent,\r\n    //     id: this.props.selectedNoteID\r\n    //   })\r\n    // }\r\n  }\r\n\r\n  state = {\r\n    value: initialValue,\r\n    id: \"\",\r\n    email: \"test\",\r\n  }\r\n\r\n  // On change, update the app's React state with the new editor value.\r\n  onChange = ({ value }) => {\r\n      // console.log(this.state.email);\r\n\r\n    this.setState({ value })\r\n    // API.saveNote({content: JSON.stringify(value), userId: this.state.email});\r\n    if (this.props.selectedNoteBody) {\r\n      API.updateNote(this.state.id, { content: JSON.stringify(value) });\r\n    }\r\n    \r\n  }\r\n\r\n  // Render the editor.\r\n  render() {\r\n    const { classes } = this.props;\r\n    // return <Editor value={this.state.value} onChange={this.onChange} />\r\n    return(\r\n      <Paper>\r\n      <Editor\r\n        className={classes.scroll} \r\n        value={this.state.value} \r\n        onChange={this.onChange}\r\n        style={{\r\n          'minHeight':'calc(100vh - 90px)',\r\n          margin: '20px 0 30px 0',\r\n          padding: '10px',\r\n          color: this.props.text,\r\n        }}\r\n      />\r\n      </Paper>\r\n    ) \r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(NoteArea);","import React from 'react';\r\nimport AuthUserContext from '../AuthUserContext';\r\nimport SignUpPage from '../SignUp';\r\n// import Note from \"../Note\";\r\nimport NoteArea from \"../NoteArea\";\r\n\r\nclass Content extends React.Component {\r\n  render() {\r\n\r\n    return (\r\n      <AuthUserContext.Consumer>\r\n        {authUser => authUser\r\n          ? (\r\n            <>\r\n            {/* For testing */}\r\n            {/* {console.log(\"Getting user info from firebase...\")}\r\n            {console.log(authUser)} */}\r\n            <NoteArea \r\n              selectedNoteBody={this.props.selectedNoteBody}\r\n              selectedNoteID={this.props.selectedNoteID}\r\n              text={this.props.text}\r\n            />\r\n            </>\r\n          ) : (\r\n            <SignUpPage/>\r\n            // This page needs info about the app, ie. landing page\r\n          )\r\n        }\r\n      </AuthUserContext.Consumer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Content;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst styles = theme => ({\r\n  close: {\r\n    padding: theme.spacing.unit / 2,\r\n  },\r\n});\r\n\r\nclass DeleteAlert extends Component {\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <div>\r\n        <Snackbar\r\n          className={classes.alert}\r\n          anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'left',\r\n          }}\r\n          open={this.props.deleteAlertOpen}\r\n          autoHideDuration={2000}\r\n          onClose={this.props.handleAlertClose}\r\n          ContentProps={{\r\n            'aria-describedby': 'message-id',\r\n          }}\r\n          message={<span id=\"message-id\">Note deleted</span>}\r\n          action={[\r\n            <IconButton\r\n              key=\"close\"\r\n              aria-label=\"Close\"\r\n              color=\"inherit\"\r\n              className={classes.close}\r\n              onClick={this.props.handleAlertClose}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>,\r\n          ]}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDeleteAlert.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(DeleteAlert);","import React from 'react';\r\nimport Navbar from '../TopNav/TopNav';\r\n// import { withStyles } from '@material-ui/core/styles';\r\nimport LeftDrawer from '../LeftDrawer/LeftDrawer'\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Content from '../Content/Content';\r\nimport DeleteAlert from '../DeleteAlert/DeleteAlert';\r\nimport { firebase } from '../../firebase';\r\n\r\nimport { withStyles, createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\nconst styles = {\r\n  root: {\r\n    flexGrow: 1\r\n  },\r\n  appFrame: {\r\n    height: '100vh', // Important\r\n    zIndex: 1,\r\n    overflow: 'hidden',\r\n    position: 'relative',\r\n    // display: 'flex',\r\n    width: '100%'\r\n  },\r\n  scroll: {\r\n    overflowY: 'scroll',\r\n    height: 'calc(100vh - 40px)'\r\n  }\r\n}\r\n\r\nclass MainPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      // authUser: null,\r\n      leftOpen: false,\r\n      selectedNoteID: null,\r\n      selectedNoteBody: null,\r\n      deleteAlertOpen: false,\r\n      theme: 'light',\r\n      text: 'black'\r\n    };\r\n  }\r\n\r\n  handleLeftDrawer = () => {\r\n    this.setState({\r\n      leftOpen: !this.state.leftOpen\r\n    });\r\n  };\r\n\r\n  handleSelectedNote = (id, content) => {\r\n    // console.log(`Selected note function fired in Mainpage. Setting state for selected note:\\n id: ${id} \\n content: ${content}`);\r\n\r\n    this.setState({\r\n      selectedNoteID: id,\r\n      selectedNoteBody: content\r\n    })\r\n    console.log(this.state.selectedNoteID + \"\\n\" + this.state.selectedNoteBody)\r\n  }\r\n\r\n  handleDeleteAlert = () => {\r\n    console.log(\"Delete alert function fired.\");\r\n    this.setState({\r\n      deleteAlertOpen: true\r\n    })\r\n  }\r\n\r\n  handleAlertClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    this.setState({ deleteAlertOpen: false });\r\n  };\r\n\r\n  componentDidMount() {\r\n    firebase.auth.onAuthStateChanged(authUser => {\r\n      if (authUser != null) this.setState({ leftOpen: true })\r\n      if (!authUser) this.setState({ leftOpen: false })\r\n    })\r\n  }\r\n\r\n  handleThemeToggle = () => {\r\n    if (this.state.theme === 'light') {\r\n      this.setState({ theme: 'dark', text: 'white' })\r\n    }\r\n    else {\r\n      this.setState({ theme: 'light', text: 'black' })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    const theme = createMuiTheme({\r\n      palette: {\r\n        type: this.state.theme,\r\n      },\r\n    });\r\n\r\n    return(\r\n      <>\r\n      <MuiThemeProvider theme={theme}>\r\n        <CssBaseline />\r\n        <div className={classes.root}>\r\n          <div className={classes.appFrame}>\r\n            <Navbar\r\n              leftOpen={this.state.leftOpen}\r\n              handleLeftDrawer={this.handleLeftDrawer}\r\n              handleThemeToggle={this.handleThemeToggle}\r\n            />\r\n            <DeleteAlert\r\n              deleteAlertOpen={this.state.deleteAlertOpen}\r\n              handleAlertClose={this.handleAlertClose}\r\n            />\r\n            <Grid container spacing={32}>\r\n              <Grid item md={2}>\r\n                <LeftDrawer\r\n                  leftOpen={this.state.leftOpen}\r\n                  handleLeftDrawer={this.handleLeftDrawer}\r\n                  handleSelectedNote={this.handleSelectedNote}\r\n                  handleDeleteAlert={this.handleDeleteAlert}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item md={9} xs={12}>\r\n                <main>\r\n                  <Content\r\n                    selectedNoteID={this.state.selectedNoteID}\r\n                    selectedNoteBody={this.state.selectedNoteBody}\r\n                    text={this.state.text}\r\n                  />\r\n                </main>\r\n              </Grid>\r\n\r\n              {/* <Grid item md={2}>\r\n              </Grid> */}\r\n            </Grid>\r\n          </div>\r\n        </div>\r\n      </MuiThemeProvider>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true} )(MainPage);","import React, { Component } from 'react';\r\n// import { withRouter } from 'react-router-dom';\r\n\r\n// import { SignUpLink } from './SignUp';\r\n// import { PasswordForgetLink } from './PasswordForget';\r\nimport { auth } from '../firebase';\r\nimport * as routes from '../constants/routes';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport PropTypes from 'prop-types';\r\n// import Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n// import LockIcon from '@material-ui/icons/LockOutlined';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport Navbar from './TopNav/TopNav';\r\n\r\nconst styles = theme => ({\r\n  layout: {\r\n    width: 'auto',\r\n    display: 'block', // Fix IE11 issue.\r\n    marginLeft: theme.spacing.unit * 3,\r\n    marginRight: theme.spacing.unit * 3,\r\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n      width: 400,\r\n      // marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing.unit * 8,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'left',\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  // avatar: {\r\n  //   margin: theme.spacing.unit,\r\n  //   backgroundColor: theme.palette.secondary.main,\r\n  // },\r\n  form: {\r\n    width: '100%', // Fix IE11 issue.\r\n    marginTop: theme.spacing.unit,\r\n  },\r\n  submit: {\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\n\r\n// const SignInPage = ({ history }) => \r\n//   <div>\r\n//     <h1>SignIn</h1>\r\n//     <SignInForm history={history} />\r\n//     <PasswordForgetLink />\r\n//     <SignUpLink />\r\n//   </div>\r\n\r\nconst byPropKey = (propertyName, value) => () => ({\r\n  [propertyName]: value,\r\n});\r\n\r\nconst INITIAL_STATE = {\r\n  email: '',\r\n  password: '',\r\n  error: null,\r\n};\r\n\r\nclass SignInForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { ...INITIAL_STATE };\r\n  }\r\n\r\n  onSubmit = (event) => {\r\n    const {\r\n      email,\r\n      password,\r\n    } = this.state;\r\n\r\n    const { history } = this.props;\r\n\r\n    auth.doSignInWithEmailAndPassword(email, password)\r\n      .then(() => {\r\n        this.setState({ ...INITIAL_STATE });\r\n        history.push(routes.HOME);\r\n      })\r\n      .catch(error => {\r\n        this.setState(byPropKey('error', error));\r\n      });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    const {\r\n      email,\r\n      password,\r\n      // error,\r\n    } = this.state;\r\n\r\n    const isInvalid =\r\n      password === '' ||\r\n      email === '';\r\n\r\n      return (\r\n        <React.Fragment>\r\n          <Navbar />\r\n          <CssBaseline />\r\n          <main className={classes.layout}>\r\n            <Paper className={classes.paper}>\r\n              <Typography variant=\"headline\">Sign in</Typography>\r\n              <form className={classes.form} onSubmit={this.onSubmit}>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <InputLabel htmlFor=\"email\">Email Address</InputLabel>\r\n                  <Input \r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    autoComplete=\"email\"\r\n                    onChange={event => this.setState(byPropKey('email', event.target.value))}\r\n                    autoFocus />\r\n                </FormControl>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                  <Input\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    id=\"password\"\r\n                    autoComplete=\"current-password\"\r\n                    onChange={event => this.setState(byPropKey('password', event.target.value))}\r\n                  />\r\n                </FormControl>\r\n                <FormControlLabel\r\n                  control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n                  label=\"Remember me\"\r\n                />\r\n                <Button\r\n                  disabled={isInvalid}\r\n                  type=\"submit\"\r\n                  fullWidth\r\n                  variant=\"raised\"\r\n                  color=\"default\"\r\n                  className={classes.submit}\r\n                >\r\n                  Sign in\r\n                </Button>\r\n                <div>\r\n                  <Link to={routes.PASSWORD_FORGET}>Lost your password?</Link>\r\n                </div>\r\n              </form>\r\n            </Paper>\r\n          </main>\r\n        </React.Fragment>\r\n      );\r\n  }\r\n}\r\n\r\nSignInForm.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\n// export default withRouter(SignInPage);\r\nexport default withStyles(styles)(SignInForm);\r\n\r\nexport {\r\n  SignInForm,\r\n};","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { auth } from '../firebase';\r\nimport * as routes from '../constants/routes';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Navbar from './TopNav/TopNav';\r\n\r\nconst styles = theme => ({\r\n  layout: {\r\n    width: 'auto',\r\n    display: 'block', // Fix IE11 issue.\r\n    marginLeft: theme.spacing.unit * 3,\r\n    marginRight: theme.spacing.unit * 3,\r\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n      width: 400,\r\n      // marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing.unit * 8,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'left',\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE11 issue.\r\n    marginTop: theme.spacing.unit,\r\n  },\r\n  submit: {\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\n// const PasswordForgetPage = () =>\r\n//   <div>\r\n//     <h1>PasswordForget</h1>\r\n//     <PasswordForgetForm />\r\n//   </div>\r\n\r\nconst byPropKey = (propertyName, value) => () => ({\r\n  [propertyName]: value,\r\n});\r\n\r\nconst INITIAL_STATE = {\r\n  email: '',\r\n  error: null,\r\n};\r\n\r\nclass PasswordForgetForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { ...INITIAL_STATE };\r\n  }\r\n\r\n  onSubmit = (event) => {\r\n    const { email } = this.state;\r\n\r\n    auth.doPasswordReset(email)\r\n      .then(() => {\r\n        this.setState({ ...INITIAL_STATE });\r\n      })\r\n      .catch(error => {\r\n        this.setState(byPropKey('error', error));\r\n      });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    const {\r\n      email,\r\n      error,\r\n    } = this.state;\r\n\r\n    const isInvalid = email === '';\r\n\r\n    return (\r\n      <>\r\n      <Navbar />\r\n      <CssBaseline />\r\n      <main className={classes.layout}>\r\n      <Paper className={classes.paper}>\r\n      <form className={classes.form} onSubmit={this.onSubmit}>\r\n        <FormControl margin=\"normal\" required fullWidth>\r\n          <InputLabel htmlFor=\"email\">Email</InputLabel>\r\n          <Input\r\n            type=\"email\"\r\n            // autoComplete=\"email\"\r\n            margin=\"normal\"\r\n            value={this.state.email}\r\n            onChange={event => this.setState(byPropKey('email', event.target.value))}\r\n          />\r\n\r\n          \r\n        </FormControl>\r\n        <Button disabled={isInvalid} type=\"submit\" fullWidth variant=\"contained\" color=\"primary\" className={classes.submit}>\r\n          Reset My Password\r\n        </Button>\r\n      </form>\r\n      </Paper>\r\n      </main>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst PasswordForgetLink = () =>\r\n  <p>\r\n    <Link to={routes.PASSWORD_FORGET}>Forgot Password?</Link>\r\n  </p>\r\n\r\n\r\nPasswordForgetForm.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\n// export default PasswordForgetPage;\r\nexport default withStyles(styles)(PasswordForgetForm);\r\nexport {\r\n  PasswordForgetForm,\r\n  PasswordForgetLink,\r\n};","import React from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport MainPage from './components/Page/MainPage';\r\nimport SignUpPage from './components/SignUp';\r\nimport SignInPage from './components/SignIn';\r\nimport PasswordForgetPage from './components/PasswordForget';\r\nimport AccountPage from './components/Account';\r\n// import Note from \"./components/Note\";\r\n\r\nimport withAuthentication from './components/withAuthentication';\r\nimport * as routes from './constants/routes';\r\n\r\n// currently unused components, shouldn't need them in the end\r\n// import Navigation from './components/Navigation';\r\n// import LandingPage from './components/Landing';\r\n// import HomePage from './components/Home';\r\n\r\nconst App = () =>\r\n  <Router>\r\n    <>\r\n      <Switch>\r\n      {/* <Route exact path={routes.LANDING} component={LandingPage} /> */}\r\n      <Route exact path={routes.LANDING} component={MainPage} />\r\n      {/* <Route exact path=\"/\" component={MainPage} /> */}\r\n      <Route exact path={routes.SIGN_UP} component={SignUpPage} />\r\n      <Route exact path={routes.SIGN_IN} component={SignInPage} />\r\n      {/* <Route exact path={routes.PASSWORD_FORGET} component={PasswordForgetPage} /> */}\r\n      <Route exact path={routes.HOME} component={MainPage} />\r\n      <Route exact path={routes.ACCOUNT} component={AccountPage} />\r\n      {/* <Route exact path={routes.NOTE} component={Note}/> */}\r\n    </Switch>\r\n    </>\r\n  </Router>\r\n\r\nexport default withAuthentication(App);\r\n","import React from 'react';\r\n\r\nimport AuthUserContext from './AuthUserContext';\r\nimport { firebase } from '../firebase';\r\n\r\n// trying to implement the user frontend\r\n// import Navbar from './TopNav/TopNav';\r\n// import LeftDrawer from './LeftDrawer/LeftDrawer';\r\n// import RightDrawer from './RightDrawer/RightDrawer';\r\n// import Typography from '@material-ui/core/Typography';\r\n\r\nconst withAuthentication = (Component) =>\r\n  class WithAuthentication extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = {\r\n        authUser: null,\r\n        leftOpen: false,\r\n        rightOpen: false\r\n      };\r\n    }\r\n\r\n    handleLeftDrawer = () => {\r\n      this.setState({\r\n        leftOpen: !this.state.leftOpen\r\n      });\r\n    };\r\n  \r\n    handleRightDrawer = () => {\r\n      this.setState({\r\n        rightOpen: !this.state.rightOpen\r\n      })\r\n    }\r\n\r\n    componentDidMount() {\r\n      firebase.auth.onAuthStateChanged(authUser => {\r\n        authUser\r\n          ? this.setState({ authUser })\r\n          : this.setState({ authUser: null });\r\n      });\r\n    }\r\n\r\n    render() {\r\n      const { authUser } = this.state;\r\n\r\n      return (\r\n        <AuthUserContext.Provider value={authUser}>\r\n          <Component {...this.props} />\r\n        </AuthUserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default withAuthentication;","const INITIAL_STATE = {\r\n    authUser: null,\r\n  };\r\n  \r\n  const applySetAuthUser = (state, action) => ({\r\n    ...state,\r\n    authUser: action.authUser\r\n  });\r\n  \r\n  function sessionReducer(state = INITIAL_STATE, action) {\r\n    switch(action.type) {\r\n      case 'AUTH_USER_SET' : {\r\n        return applySetAuthUser(state, action);\r\n      }\r\n      default : return state;\r\n    }\r\n  }\r\n  \r\n  export default sessionReducer;","const INITIAL_STATE = {\r\n    users: {},\r\n  };\r\n  \r\n  const applySetUsers = (state, action) => ({\r\n    ...state,\r\n    users: action.users\r\n  });\r\n  \r\n  function userReducer(state = INITIAL_STATE, action) {\r\n    switch(action.type) {\r\n      case 'USERS_SET' : {\r\n        return applySetUsers(state, action);\r\n      }\r\n      default : return state;\r\n    }\r\n  }\r\n  \r\n  export default userReducer;","import { combineReducers } from 'redux';\r\nimport sessionReducer from './session';\r\nimport userReducer from './user';\r\n\r\nconst rootReducer = combineReducers({\r\n  sessionState: sessionReducer,\r\n  userState: userReducer,\r\n});\r\n\r\nexport default rootReducer;","import { createStore } from 'redux';\r\nimport rootReducer from '../reducers';\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'mobx-react';\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './stores';\r\n// import registerServiceWorker from './registerServiceWorker';\r\n\r\nReactDOM.render(\r\n\r\n  <Provider { ...store }>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// registerServiceWorker();"],"sourceRoot":""}